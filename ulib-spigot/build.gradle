dependencies {
    compile project(':ulib-spigot-api')
    compileOnly group: 'com.mojang', name: 'authlib', version: '1.5.21'
    compileOnly 'com.destroystokyo.paper:paper-api:1.16.3-R0.1-SNAPSHOT'
    compileOnly group: 'net.md-5', name: 'bungeecord-chat', version: '1.16-SNAPSHOT'

    // annotation
    annotationProcessor 'org.projectlombok:lombok:1.18.6'
}

def projects = ['core', 'spigot-api', 'spigot-bungeecord-api']
jar {
    for (String sub : projects) {
        def proj = ':ulib-' + sub

        dependsOn "$proj:build"

        def buildDir = project(proj).buildDir.path
        from("$buildDir/classes/java/main") {
            include '**'
        }
        from("$buildDir/resources/main") {
            include '**'
        }
    }
}

processResources {
    eachFile {
        copyDetails ->
            if (copyDetails.path == 'plugin.yml') {
                filter { line ->
                    line.replace('{{version}}', project.version)
                }
            }
    }
}