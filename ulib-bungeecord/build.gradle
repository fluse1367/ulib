dependencies {
    compile project(':ulib-bungeecord-api')
    compileOnly group: 'net.md-5', name: 'bungeecord-api', version: '1.15-SNAPSHOT'

    // annotation
    annotationProcessor 'org.projectlombok:lombok:1.18.6'
}

def projects = ['core', 'bungeecord-api', 'spigot-bungeecord-api']
jar {
    for (String sub : projects) {
        def proj = ':ulib-' + sub

        dependsOn "$proj:build"

        def buildDir = project(proj).buildDir.path
        from("$buildDir/classes/java/main") {
            include '**'
        }
        from("$buildDir/resources/main") {
            include '**'
        }
    }
}

processResources {
    eachFile {
        copyDetails ->
            if (copyDetails.path == 'bungee.yml') {
                filter { line ->
                    line.replace('{{version}}', project.version)
                }
            }
    }
}