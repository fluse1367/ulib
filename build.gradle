import static java.util.Optional.ofNullable

// plugin support
buildscript {
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "io.freefair.gradle:lombok-plugin:6.3.0"
    }
}

allprojects {
    // plugins
    {
        apply plugin: 'java-library'
        apply plugin: "io.freefair.lombok"
    }

    // project meta settings
    {
        def major = 2, minor = 1, patch = 0
        // evaluate variation
        String variation
        switch (ofNullable((String) project.findProperty('variation')).orElse('snapshot').toLowerCase()) {
            case 'release':
                variation = ''
                break
            case 'beta':
                variation = "BETA-${ofNullable((String) project.findProperty('beta')).orElse(('0'))}"
                break
            case 'snapshot':
                // fallthrough to default
            default:
                variation = 'SNAPSHOT'
        }

        group 'eu.software4you.ulib'
        version "$major.$minor.$patch${variation.isEmpty() ? '' : "-$variation"}"
    }


    // dependencies
    {
        repositories {
            mavenCentral()
        }

        dependencies {
            compileOnly 'org.jetbrains:annotations:22.0.0'
        }
    }
}